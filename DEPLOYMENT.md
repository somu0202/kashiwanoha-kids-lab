# ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¬ã‚¤ãƒ‰ - Kashiwanoha Kids Lab

## ğŸš€ æœ¬ç•ªç’°å¢ƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

### å‰ææ¡ä»¶

- GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- Supabaseã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- Vercelã‚¢ã‚«ã‚¦ãƒ³ãƒˆ

## ã‚¹ãƒ†ãƒƒãƒ—1: Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1.1 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

1. [Supabase](https://supabase.com)ã«ãƒ­ã‚°ã‚¤ãƒ³
2. "New Project"ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã€ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¨­å®š
4. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒä½œæˆã•ã‚Œã‚‹ã¾ã§å¾…æ©Ÿï¼ˆ2-3åˆ†ï¼‰

### 1.2 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ

1. Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®SQL Editorã‚’é–‹ã
2. `supabase/migrations/00001_initial_schema.sql`ã®å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼
3. SQL Editorã«è²¼ã‚Šä»˜ã‘ã¦å®Ÿè¡Œï¼ˆRUNï¼‰
4. æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèª

### 1.3 èªè¨¼è¨­å®š

1. Authentication > Providersã«ç§»å‹•
2. Email providerã‚’æœ‰åŠ¹åŒ–
3. "Enable email confirmations"ã‚’ã‚ªãƒ•ã«ã™ã‚‹ï¼ˆMagic Linkã®ã¿ä½¿ç”¨ï¼‰

### 1.4 API Keysã®å–å¾—

1. Settings > APIã«ç§»å‹•
2. ä»¥ä¸‹ã‚’ãƒ¡ãƒ¢:
   - Project URL
   - anon public key

## ã‚¹ãƒ†ãƒƒãƒ—2: GitHub ãƒªãƒã‚¸ãƒˆãƒªã®æº–å‚™

### 2.1 ãƒªãƒã‚¸ãƒˆãƒªä½œæˆ

```bash
cd /home/user/webapp
git init
git add .
git commit -m "Initial commit: Kashiwanoha Kids Lab"
git branch -M main
git remote add origin https://github.com/YOUR_USERNAME/kashiwanoha-kids-lab.git
git push -u origin main
```

### 2.2 .env.localã®é™¤å¤–ç¢ºèª

`.gitignore`ã«`.env.local`ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªï¼ˆæ©Ÿå¯†æƒ…å ±ã®ä¿è­·ï¼‰

## ã‚¹ãƒ†ãƒƒãƒ—3: Vercel ãƒ‡ãƒ—ãƒ­ã‚¤

### 3.1 Vercelãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

1. [Vercel](https://vercel.com)ã«ãƒ­ã‚°ã‚¤ãƒ³
2. "Add New Project"ã‚’ã‚¯ãƒªãƒƒã‚¯
3. GitHubãƒªãƒã‚¸ãƒˆãƒªã‚’é¸æŠ
4. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã‚’è¨­å®šï¼ˆä¾‹: kashiwanoha-kids-labï¼‰

### 3.2 ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

**Environment Variables**ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ä»¥ä¸‹ã‚’è¿½åŠ :

```
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
NEXT_PUBLIC_APP_URL=https://your-project.vercel.app
```

**é‡è¦**: Productionã€Previewã€Developmentã™ã¹ã¦ã«ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã‚‹

### 3.3 ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ

1. "Deploy"ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ãƒ“ãƒ«ãƒ‰ã¨ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå®Œäº†ã™ã‚‹ã¾ã§å¾…æ©Ÿï¼ˆ5-10åˆ†ï¼‰
3. ãƒ‡ãƒ—ãƒ­ã‚¤URLã‚’ç¢ºèª

## ã‚¹ãƒ†ãƒƒãƒ—4: åˆæœŸè¨­å®š

### 4.1 ç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ

1. ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸã‚¢ãƒ—ãƒªã®`/auth/login`ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ç®¡ç†è€…ç”¨ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›
3. ãƒ¡ãƒ¼ãƒ«ã®Magic Linkã‚’ã‚¯ãƒªãƒƒã‚¯
4. Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§`auth.users`ã‹ã‚‰User IDã‚’å–å¾—

### 4.2 ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ

Supabase SQL Editorã§å®Ÿè¡Œ:

```sql
INSERT INTO profiles (id, role, full_name, email)
VALUES (
  'your-user-id-from-auth-users',  -- auth.usersã®ID
  'admin',
  'ç®¡ç†è€…å',
  'admin@example.com'
);
```

### 4.3 å‹•ä½œç¢ºèª

1. `/dashboard`ã«ã‚¢ã‚¯ã‚»ã‚¹
2. å­ã©ã‚‚ã‚’ç™»éŒ²
3. è©•ä¾¡ã‚’ä½œæˆ
4. ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
5. PDFãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œ
6. å…±æœ‰ãƒªãƒ³ã‚¯ã‚’ä½œæˆã—ã¦ã‚¢ã‚¯ã‚»ã‚¹

## ã‚¹ãƒ†ãƒƒãƒ—5: ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

### 5.1 ãƒ‰ãƒ¡ã‚¤ãƒ³è¿½åŠ 

1. Vercelãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®"Settings" > "Domains"
2. ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¿½åŠ ï¼ˆä¾‹: kids-lab.example.comï¼‰
3. DNSãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’è¨­å®š:
   ```
   Type: A
   Name: kids-lab
   Value: 76.76.21.21
   ```

### 5.2 ç’°å¢ƒå¤‰æ•°ã®æ›´æ–°

```
NEXT_PUBLIC_APP_URL=https://kids-lab.example.com
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼

```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ“ãƒ«ãƒ‰ãƒ†ã‚¹ãƒˆ
npm run build

# å‹ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯
npm run type-check
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼

- Supabase Project URLãŒæ­£ã—ã„ã‹ç¢ºèª
- Anon KeyãŒæ­£ã—ã„ã‹ç¢ºèª
- RLSãƒãƒªã‚·ãƒ¼ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

### èªè¨¼ã‚¨ãƒ©ãƒ¼

- Supabaseèªè¨¼è¨­å®šã§Email ProviderãŒæœ‰åŠ¹ã‹ç¢ºèª
- Magic Linkã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå…ˆãŒæ­£ã—ã„ã‹ç¢ºèª

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] ç’°å¢ƒå¤‰æ•°ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹
- [ ] .env.localãŒGitã«å«ã¾ã‚Œã¦ã„ãªã„
- [ ] Supabase RLSãŒå…¨ãƒ†ãƒ¼ãƒ–ãƒ«ã§æœ‰åŠ¹
- [ ] æœ¬ç•ªDBãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒå¼·åŠ›
- [ ] APIã‚­ãƒ¼ãŒã‚³ãƒ¼ãƒ‰ã«ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ãªã„

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### ç”»åƒæœ€é©åŒ–

Next.js Imageã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨ï¼ˆæ—¢ã«å®Ÿè£…æ¸ˆã¿ï¼‰

### ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°

```javascript
// app/dashboard/page.tsx
export const revalidate = 60 // 60ç§’ã”ã¨ã«å†æ¤œè¨¼
```

## ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°

### Vercel Analytics

1. Vercelãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§"Analytics"ã‚’æœ‰åŠ¹åŒ–
2. ãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç¢ºèª

### Supabase Monitoring

1. Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§Database > Reportsã‚’ç¢ºèª
2. APIãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ ã‚’ç›£è¦–

## ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆ¦ç•¥

### æ—¥æ¬¡ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

Supabaseã®è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ç¢ºèª:
- Database > Backups
- Point-in-Time Recovery (PITR)ãŒæœ‰åŠ¹ã‹ç¢ºèª

### æ‰‹å‹•ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ€ãƒ³ãƒ—ï¼ˆé€±1å›æ¨å¥¨ï¼‰
pg_dump -h db.xxx.supabase.co -U postgres -d postgres > backup_$(date +%Y%m%d).sql
```

## ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæ‰‹é †

```bash
# æ©Ÿèƒ½è¿½åŠ ãƒ»ä¿®æ­£
git add .
git commit -m "Add new feature"
git push origin main

# VercelãŒè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
# ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ãƒ‡ãƒ—ãƒ­ã‚¤çŠ¶æ³ã‚’ç¢ºèª
```

## ã‚µãƒãƒ¼ãƒˆ

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆ:

1. Vercelã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ­ã‚°ã‚’ç¢ºèª
2. Supabaseã®ãƒ­ã‚°ã‚’ç¢ºèª
3. GitHubã®Issuesã§å ±å‘Š

---

Â© 2025 Kashiwanoha Kids Lab
